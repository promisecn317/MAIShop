{"ast":null,"code":"import _toConsumableArray from \"E:/\\u6587\\u6863/GitHub/MAIShop/MAIShop/view/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  // name: 'App',\n  data: function data() {\n    return {\n      dialogImageUrl: \"\",\n      dialogVisible: false,\n      form: {\n        title: \"\",\n        price: \"\",\n        desc: \"\"\n      },\n      rules: {\n        title: [{\n          required: true,\n          message: 'The title cannot be empty',\n          trigger: 'blur'\n        }],\n        price: [{\n          required: true,\n          message: 'The price cannot be empty',\n          trigger: 'blur'\n        }],\n        desc: [{\n          required: true,\n          message: 'The description cannot be empty',\n          trigger: 'blur'\n        }]\n      },\n      param: new FormData(),\n      fileList: []\n    };\n  },\n  methods: {\n    onSubmit: function onSubmit() {\n      var _this2 = this;\n\n      console.log(\"submit!\");\n\n      var _this = this;\n\n      this.$refs.upload.submit();\n      this.param.append(\"productName\", _this.form.title);\n      this.param.append(\"productPrice\", _this.form.price);\n      this.param.append(\"productDescription\", _this.form.desc); // this.param.append(\"Product\", _this.form.param);\n\n      console.log(this.param);\n      this.$axios.post(\"http://localhost:8088/newProductInformation\", {\n        product: this.param\n      }).then(function (res) {\n        _this2.$message({\n          showClose: true,\n          message: \" post successfully！\",\n          type: \"success\"\n        });\n\n        setTimeout(function () {\n          _this2.$router.push(\"/home\"); //edit成功后自动跳转到home页面\n\n        }, 2000);\n      });\n    },\n    open: function open() {\n      var _this3 = this;\n\n      this.$confirm('Unsaved content detected, Do you want to continue editing?', 'Confirmation ', {\n        distinguishCancelAndClose: true,\n        confirmButtonText: 'Continue',\n        cancelButtonText: 'Discard changes'\n      }).then(function () {\n        _this3.$message({\n          type: 'info',\n          message: 'Stay on the current page'\n        });\n      }).catch(function (action) {\n        _this3.$message({\n          type: 'info',\n          message: action === 'cancel' ? 'Discard changes and leave' : 'Stay on the current page'\n        });\n      });\n    },\n    handleRemove: function handleRemove(file, fileList) {\n      console.log(file, fileList);\n    },\n    handlePictureCardPreview: function handlePictureCardPreview(file) {\n      this.dialogImageUrl = file.url;\n      this.dialogVisible = true;\n    },\n    beforeUpload: function beforeUpload(file) {\n      var _this4 = this;\n\n      this.param = new FormData();\n      this.fileList.push(file);\n\n      var images = _toConsumableArray(this.fileList);\n\n      console.log(\"images\", images);\n      images.forEach(function (img, index) {\n        _this4.param.append(\"productImage_\".concat(index), img); // 把单个图片重命名，存储起来（给后台）\n\n      });\n      return true;\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA;AACA;AACAA,MAFA,kBAEA;AACA;AACAC,wBADA;AAEAC,0BAFA;AAGAC;AACAC,iBADA;AAEAC,iBAFA;AAGAC;AAHA,OAHA;AAQAC;AACAH;AAAAI;AAAAC;AAAAC;AAAA,UADA;AAGAL;AAAAG;AAAAC;AAAAC;AAAA,UAHA;AAKAJ;AAAAE;AAAAC;AAAAC;AAAA;AALA,OARA;AAgBAC,2BAhBA;AAiBAC;AAjBA;AAmBA,GAtBA;AAuBAC;AACAC,YADA,sBACA;AAAA;;AACAC;;AACA;;AACA;AACA;AACA;AACA,+DANA,CAOA;;AACAA;AACA;AAAAC;AAAA;AACA;AACAC,yBADA;AAEAR,wCAFA;AAGAS;AAHA;;AAKAC;AACA,uCADA,CACA;;AACA,SAFA,EAEA,IAFA;AAGA,OATA;AAUA,KApBA;AAqBAC,QArBA,kBAqBA;AAAA;;AACA;AAEAC,uCAFA;AAGAC,qCAHA;AAIAC;AAJA,SAMAC,IANA,CAMA;AACA;AACAN,sBADA;AAEAT;AAFA;AAIA,OAXA,EAYAgB,KAZA,CAYA;AACA;AACAP,sBADA;AAEAT,yCACA,2BADA,GAEA;AAJA;AAMA,OAnBA;AAoBA,KA1CA;AA2CAiB,gBA3CA,wBA2CAC,IA3CA,EA2CAf,QA3CA,EA2CA;AACAG;AACA,KA7CA;AA8CAa,4BA9CA,oCA8CAD,IA9CA,EA8CA;AACA;AACA;AACA,KAjDA;AAkDAE,gBAlDA,wBAkDAF,IAlDA,EAkDA;AAAA;;AACA;AACA;;AACA;;AACAZ;AAEAe;AACA,gEADA,CACA;;AACA,OAFA;AAIA;AACA;AA7DA;AAvBA","names":["data","dialogImageUrl","dialogVisible","form","title","price","desc","rules","required","message","trigger","param","fileList","methods","onSubmit","console","product","showClose","type","setTimeout","open","distinguishCancelAndClose","confirmButtonText","cancelButtonText","then","catch","handleRemove","file","handlePictureCardPreview","beforeUpload","images"],"sourceRoot":"src/views/main","sources":["NewproductView.vue"],"sourcesContent":["<template>\r\n  <div id=\"app\">\r\n    <el-container>\r\n      <!-- <el-aside width=\"400px\"></el-aside> -->\r\n      <el-container>\r\n        <el-header ></el-header>\r\n        <el-main style=\"margin:0 auto;\">\r\n          <el-card class=\"box-card\">\r\n            <div slot=\"header\" class=\"clearfix\">\r\n              <i class=\" el-icon-error\" @click=\"open\"></i>\r\n              <h1\r\n                style=\" color: #07D89E;\r\n              text-align: center;\r\n              font-size: 40px ;\r\n              margin-top: -25px;margin-bottom:-10px \">\"new麦\"</h1>\r\n            </div>\r\n            <div  class=\"txt item\">\r\n              <el-form ref=\"form\" :model=\"form\" :rules=\"rules\">\r\n                <el-form-item label=\"\" prop=\"title\">\r\n                  <el-input v-model=\"form.title\" placeholder=\"Title (≤ 10 digits)\" maxlength=\"10\" style=\"width:365px\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"\" prop=\"price\">\r\n                  <el-input v-model=\"form.price\" placeholder=\"Price (≤ 8 digits, accept decimal points to the last two)\" maxlength=\"6\" style=\"width:365px\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"\" prop=\"desc\">\r\n                  <el-input type=\"textarea\"  :autosize=\"{ minRows: 2, maxRows: 4}\" v-model=\"form.desc\" placeholder=\"Describe your product (≤ 50 digits)\" maxlength=\"50\"\r\n                            style=\"width:365px\"></el-input>\r\n                </el-form-item >\r\n                <el-form-item ><!--action 如果是手动上传 action随便填一下就好了，自动上传填接口地址就行-->\r\n                  <el-upload\r\n                    class=\"upload-demo\"\r\n                    action=\"#\"\r\n                    ref=\"upload\"\r\n                    list-type=\"picture-card\"\r\n                    :on-preview=\"handlePictureCardPreview\"\r\n                    :before-upload=\"beforeUpload\"\r\n                    :on-remove=\"handleRemove\"\r\n                    :limit=\"2\"\r\n                    accept=\".png, .jpg\"\r\n                    :auto-upload=\"false\"\r\n                    :multiple=\"true\">\r\n                    <i class=\"el-icon-upload\" ></i>\r\n                    <div class=\"el-upload__text\"><em>click to upload</em></div>\r\n                    <div class=\"el-upload__tip\" slot=\"tip\">Just receive jpg/png，and less than 500kb</div>\r\n                  </el-upload>\r\n                  <el-dialog :visible.sync=\"dialogVisible\">\r\n                    <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\" />\r\n                  </el-dialog>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                  <el-button type=\"primary\" @click=\"onSubmit\"\r\n                             class=\"cbt\"\r\n                             style=\"background-color:#07D89E;\r\n                           border: none;\r\n                           height:45px;\r\n                           width:300px;\r\n                           margin-top:30px\"\r\n                  >Post now!</el-button>\r\n                </el-form-item>\r\n              </el-form>\r\n            </div>\r\n          </el-card>\r\n        </el-main>\r\n        <el-footer></el-footer>\r\n      </el-container>\r\n    </el-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  // name: 'App',\r\n  data() {\r\n    return {\r\n      dialogImageUrl: \"\",\r\n      dialogVisible: false,\r\n      form: {\r\n        title: \"\",\r\n        price: \"\",\r\n        desc: \"\",\r\n      },\r\n      rules: {\r\n        title: [{required: true, message: 'The title cannot be empty', trigger: 'blur'}\r\n        ],\r\n        price: [{required: true, message: 'The price cannot be empty', trigger: 'blur'}\r\n        ],\r\n        desc: [{required: true, message: 'The description cannot be empty', trigger: 'blur'}\r\n        ],\r\n      },\r\n      param: new FormData(),\r\n      fileList: [],\r\n    };\r\n  },\r\n  methods: {\r\n    onSubmit() {\r\n      console.log(\"submit!\");\r\n      let _this = this;\r\n      this.$refs.upload.submit();\r\n      this.param.append(\"productName\", _this.form.title);\r\n      this.param.append(\"productPrice\", _this.form.price);\r\n      this.param.append(\"productDescription\", _this.form.desc);\r\n// this.param.append(\"Product\", _this.form.param);\r\n      console.log(this.param);\r\n      this.$axios.post(\"http://localhost:8088/newProductInformation\", {product:this.param}).then(res => {\r\n        this.$message({\r\n          showClose: true,\r\n          message: \" post successfully！\",\r\n          type: \"success\"\r\n        });\r\n        setTimeout(() => {\r\n          this.$router.push(\"/home\"); //edit成功后自动跳转到home页面\r\n        }, 2000);\r\n      });\r\n    },\r\n    open() {\r\n      this.$confirm('Unsaved content detected, Do you want to continue editing?', 'Confirmation ', {\r\n       \r\n       distinguishCancelAndClose: true,\r\n        confirmButtonText: 'Continue',\r\n        cancelButtonText: 'Discard changes'\r\n      })\r\n        .then(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: 'Stay on the current page'\r\n          });\r\n        })\r\n        .catch(action => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: action === 'cancel'\r\n              ? 'Discard changes and leave'\r\n              : 'Stay on the current page'\r\n          })\r\n        });\r\n    },\r\n    handleRemove(file, fileList) {\r\n      console.log(file, fileList);\r\n    },\r\n    handlePictureCardPreview(file) {\r\n      this.dialogImageUrl = file.url;\r\n      this.dialogVisible = true;\r\n    },\r\n    beforeUpload(file) {\r\n      this.param = new FormData();\r\n      this.fileList.push(file);\r\n      let images = [...this.fileList];\r\n      console.log(\"images\", images);\r\n\r\n      images.forEach((img, index) => {\r\n        this.param.append(`productImage_${index}`, img); // 把单个图片重命名，存储起来（给后台）\r\n      });\r\n\r\n      return true;\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\">\r\n#app {\r\n  background-color: #07D89E;\r\n}\r\n.text {\r\n  font-size: 14px;\r\n}\r\n\r\n.item {\r\n  margin-bottom: 18px;\r\n  text-align: center;\r\n}\r\n\r\n.clearfix:before,\r\n.clearfix:after {\r\n  display: table;\r\n  content: \"\";\r\n}\r\n.clearfix:after {\r\n  clear: both\r\n}\r\n\r\n.box-card {\r\n  width: 550px;\r\n  height: 650px;\r\n  background: rgba(255,255,255,0.4);\r\n  border: none;\r\n}\r\n.cbt:hover{\r\n  background-color: #96fbc4;\r\n  color: #96fbc4;\r\n}\r\n.el-icon-error{\r\n  margin-left: 450px;\r\n  font-size: 35px;\r\n}\r\n.el-icon-error:hover{\r\n  color: #6E6E6E;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}