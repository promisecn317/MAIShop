{"ast":null,"code":"import _toConsumableArray from \"E:/\\u6587\\u6863/GitHub/MAIShop/MAIShop/view/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"App\",\n  data: function data() {\n    return {\n      dialogImageUrl: \"\",\n      dialogVisible: false,\n      form: {\n        title: \"\",\n        price: \"\",\n        desc: \"\"\n      },\n      rules: {\n        title: [{\n          required: true,\n          message: \"The title cannot be empty\",\n          trigger: \"blur\"\n        }],\n        price: [{\n          required: true,\n          message: \"The price cannot be empty\",\n          trigger: \"blur\"\n        }],\n        desc: [{\n          required: true,\n          message: \"The description cannot be empty\",\n          trigger: \"blur\"\n        }]\n      },\n      param: \"\",\n      fileList: [],\n      proInfo: [],\n      productId: \"\"\n    };\n  },\n  created: function created() {\n    // 接收goods.vue传过来的proId\n    this.proId = this.$route.query.proId; // console.log(this.proId)\n    //调用请求数据的方法\n\n    this.getProInfo();\n  },\n  methods: {\n    //获取商品信息\n    getProInfo: function getProInfo() {\n      var that = this;\n      this.form = {\n        title: \"\",\n        price: \"\",\n        desc: \"\"\n      };\n      this.$https.get(\"/api/my_mai/itemlist/edit?productId=+ \".concat(productId)).then(function (res) {\n        //根据proId获取对应的商品详情信息\n        that.proInfo = res.data.data;\n      }).catch(function (error) {});\n    },\n    //保存修改信息\n    onSubmit: function onSubmit() {\n      var _this2 = this;\n\n      var _this = this;\n\n      this.$refs.upload.submit();\n      this.param.append(\"productName\", this.form.title);\n      this.param.append(\"productPrice\", this.form.price);\n      this.param.append(\"productDescription\", this.form.desc); // console.log(this.param);\n\n      this.$https.post(\"/api/my_mai/itemlist/edit/save\", {\n        userId: this.userId,\n        productId: this.productId,\n        proInfo: this.form\n      }).then(function (res) {\n        _this2.$message({\n          showClose: true,\n          message: \" Modified successfully！\",\n          type: \"success\"\n        });\n\n        setTimeout(function () {\n          _this2.$router.push(\"/productlist\"); //edit成功后自动跳转到myproduct页面\n\n        }, 2000);\n      });\n    },\n    close: function close() {\n      var _this3 = this;\n\n      this.$confirm(\"Unsaved content detected. Do you want to continue editing?\", \"Confirmation \", {\n        distinguishCancelAndClose: true,\n        confirmButtonText: \"Continue\",\n        cancelButtonText: \"Discard changes\"\n      }).then(function () {\n        _this3.$message({\n          type: \"info\",\n          message: \"Stay on the current page\"\n        });\n      }).catch(function (action) {\n        _this3.$message({\n          type: \"info\",\n          message: action === \"cancel\" ? \"Discard changes and leave\" : \"Stay on the current page\"\n        });\n      });\n    },\n    handleRemove: function handleRemove(file, fileList) {\n      console.log(file, fileList);\n    },\n    handlePictureCardPreview: function handlePictureCardPreview(file) {\n      this.dialogImageUrl = file.url;\n      this.dialogVisible = true;\n    },\n    beforeUpload: function beforeUpload(file) {\n      var _this4 = this;\n\n      this.param = new FormData();\n      this.fileList.push(file);\n\n      var images = _toConsumableArray(this.fileList);\n\n      console.log(\"images\", images);\n      images.forEach(function (img, index) {\n        _this4.param.append(\"productImage_\".concat(index), img); // 把单个图片重命名，存储起来（给后台）\n\n      }); // 图片上传需要为true\n\n      return true;\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuGA;AACAA,aADA;AAEAC,MAFA,kBAEA;AACA;AACAC,wBADA;AAEAC,0BAFA;AAGAC;AACAC,iBADA;AAEAC,iBAFA;AAGAC;AAHA,OAHA;AAQAC;AACAH,gBACA;AACAI,wBADA;AAEAC,8CAFA;AAGAC;AAHA,SADA,CADA;AAQAL,gBACA;AACAG,wBADA;AAEAC,8CAFA;AAGAC;AAHA,SADA,CARA;AAeAJ,eACA;AACAE,wBADA;AAEAC,oDAFA;AAGAC;AAHA,SADA;AAfA,OARA;AA+BAC,eA/BA;AAgCAC,kBAhCA;AAiCAC,iBAjCA;AAkCAC;AAlCA;AAoCA,GAvCA;AAwCAC,SAxCA,qBAwCA;AACA;AACA,yCAFA,CAGA;AACA;;AACA;AACA,GA9CA;AAgDAC;AACA;AACAC,cAFA,wBAEA;AACA;AACA;AAAAb;AAAAC;AAAAC;AAAA;AACA,kFACAY,IADA,CACA;AACA;AACAC;AACA,OAJA,EAKAC,KALA,CAKA,kBAEA,CAPA;AAQA,KAbA;AAcA;AACAC,YAfA,sBAeA;AAAA;;AACA;;AACA;AAEA;AACA;AACA,8DANA,CAOA;;AACA,kBACAC,IADA,CACA,gCADA,EACA;AACAC,2BADA;AAEAT,iCAFA;AAGAD;AAHA,OADA,EAMAK,IANA,CAMA;AACA;AACAM,yBADA;AAEAf,4CAFA;AAGAgB;AAHA;;AAKAC;AACA,8CADA,CACA;;AACA,SAFA,EAEA,IAFA;AAGA,OAfA;AAgBA,KAvCA;AAwCAC,SAxCA,mBAwCA;AAAA;;AACA,oBACA,4DADA,EAEA,eAFA,EAGA;AACAC,uCADA;AAEAC,qCAFA;AAGAC;AAHA,OAHA,EASAZ,IATA,CASA;AACA;AACAO,sBADA;AAEAhB;AAFA;AAIA,OAdA,EAeAW,KAfA,CAeA;AACA;AACAK,sBADA;AAEAhB,mBACAsB,sBACA,2BADA,GAEA;AALA;AAOA,OAvBA;AAwBA,KAjEA;AAkEAC,gBAlEA,wBAkEAC,IAlEA,EAkEArB,QAlEA,EAkEA;AACAsB;AACA,KApEA;AAqEAC,4BArEA,oCAqEAF,IArEA,EAqEA;AACA;AACA;AACA,KAxEA;AAyEAG,gBAzEA,wBAyEAH,IAzEA,EAyEA;AAAA;;AACA;AACA;;AACA;;AACAC;AAEAG;AACA,gEADA,CACA;;AACA,OAFA,EANA,CASA;;AACA;AACA;AApFA;AAhDA","names":["name","data","dialogImageUrl","dialogVisible","form","title","price","desc","rules","required","message","trigger","param","fileList","proInfo","productId","created","methods","getProInfo","then","that","catch","onSubmit","post","userId","showClose","type","setTimeout","close","distinguishCancelAndClose","confirmButtonText","cancelButtonText","action","handleRemove","file","console","handlePictureCardPreview","beforeUpload","images"],"sourceRoot":"src/views/main","sources":["edit information.vue"],"sourcesContent":["<template>\r\n  <div class=\"editPro\">\r\n    <el-container>\r\n      <el-container>\r\n        <el-header></el-header>\r\n        <el-main style=\"margin:0 auto;\">\r\n          <el-card class=\"box-card\">\r\n            <div slot=\"header\" class=\"clearfix\">\r\n              <i class=\" el-icon-error\" @click=\"close()\"></i>\r\n              <h1\r\n                style=\" color: #07D89E;\r\n              text-align: center;\r\n              font-size: 40px ;\r\n              margin-top: -25px;margin-bottom:-10px \"\r\n              >\r\n                \"edit麦\"\r\n              </h1>\r\n            </div>\r\n            <!--            主体部分-->\r\n            <div class=\"txt item\">\r\n              <el-form ref=\"form\" :model=\"form\" :rules=\"rules\">\r\n                <el-form-item label=\"\">\r\n                  <el-input\r\n                    v-model=\"form.title\"\r\n                    placeholder=\"Title\"\r\n                    maxlength=\"10\"\r\n                    prop=\"mtitle\"\r\n                    style=\"width:365px\"\r\n                  >{{ form.title }}</el-input\r\n                  >\r\n                </el-form-item>\r\n                <el-form-item label=\"\">\r\n                  <el-input\r\n                    v-model=\"form.price\"\r\n                    placeholder=\"Price\"\r\n                    maxlength=\"10\"\r\n                    prop=\"mprice\"\r\n                    style=\"width:365px\"\r\n                  >{{ form.price }}</el-input\r\n                  >\r\n                </el-form-item>\r\n                <el-form-item label=\"\">\r\n                  <el-input\r\n                    type=\"textarea\"\r\n                    :autosize=\"{ minRows: 2, maxRows: 4 }\"\r\n                    v-model=\"form.desc\"\r\n                    prop=\"mdesc\"\r\n                    placeholder=\"Describe your product\"\r\n                    maxlength=\"50\"\r\n                    style=\"width:365px\"\r\n                  >{{ form.desc }}</el-input\r\n                  >\r\n                </el-form-item>\r\n                <el-form-item\r\n                ><!--action 如果是手动上传 action随便填一下就好了，自动上传填接口地址就行-->\r\n                  <el-upload\r\n                    class=\"upload-demo\"\r\n                    action=\"#\"\r\n                    ref=\"upload\"\r\n                    list-type=\"picture-card\"\r\n                    :on-preview=\"handlePictureCardPreview\"\r\n                    :before-upload=\"beforeUpload\"\r\n                    :on-remove=\"handleRemove\"\r\n                    :limit=\"2\"\r\n                    accept=\".png, .jpg\"\r\n                    :auto-upload=\"false\"\r\n                    :multiple=\"true\"\r\n                  >\r\n                    <i class=\"el-icon-upload\"></i>\r\n                    <div class=\"el-upload__text\"><em>click to modify</em></div>\r\n                    <div class=\"el-upload__tip\" slot=\"tip\">\r\n                      Just receive jpg/png，and less than 500kb\r\n                    </div>\r\n                  </el-upload>\r\n                  <el-dialog :visible.sync=\"dialogVisible\">\r\n                    <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\" />\r\n                  </el-dialog>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                  <el-button\r\n                    type=\"primary\"\r\n                    @click.native=\"onSubmit\"\r\n                    class=\"cbt\"\r\n                    style=\"background-color:#07D89E;\r\n                           border: none;\r\n                           height:45px;\r\n                           width:300px;\r\n                           margin-top:30px;\r\n                           font-size:20px\"\r\n                  >Save now!</el-button\r\n                  >\r\n                </el-form-item>\r\n              </el-form>\r\n            </div>\r\n          </el-card>\r\n        </el-main>\r\n        <el-footer></el-footer>\r\n      </el-container>\r\n    </el-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"App\",\r\n  data() {\r\n    return {\r\n      dialogImageUrl: \"\",\r\n      dialogVisible: false,\r\n      form: {\r\n        title: \"\",\r\n        price: \"\",\r\n        desc: \"\"\r\n      },\r\n      rules: {\r\n        title: [\r\n          {\r\n            required: true,\r\n            message: \"The title cannot be empty\",\r\n            trigger: \"blur\"\r\n          }\r\n        ],\r\n        price: [\r\n          {\r\n            required: true,\r\n            message: \"The price cannot be empty\",\r\n            trigger: \"blur\"\r\n          }\r\n        ],\r\n        desc: [\r\n          {\r\n            required: true,\r\n            message: \"The description cannot be empty\",\r\n            trigger: \"blur\"\r\n          }\r\n        ]\r\n      },\r\n      param: \"\",\r\n      fileList: [],\r\n      proInfo: [],\r\n      productId: \"\"\r\n    };\r\n  },\r\n  created() {\r\n    // 接收goods.vue传过来的proId\r\n    this.proId = this.$route.query.proId;\r\n    // console.log(this.proId)\r\n    //调用请求数据的方法\r\n    this.getProInfo();\r\n  },\r\n\r\n  methods: {\r\n    //获取商品信息\r\n    getProInfo() {\r\n      let that = this;\r\n      this.form = { title: \"\", price: \"\", desc: \"\" };\r\n      this.$https.get(`/api/my_mai/itemlist/edit?productId=+ ${productId}`)\r\n        .then(res => {\r\n          //根据proId获取对应的商品详情信息\r\n          that.proInfo = res.data.data;\r\n        })\r\n        .catch(error => {\r\n\r\n        });\r\n    },\r\n    //保存修改信息\r\n    onSubmit() {\r\n      let _this = this;\r\n      this.$refs.upload.submit();\r\n\r\n      this.param.append(\"productName\", this.form.title);\r\n      this.param.append(\"productPrice\", this.form.price);\r\n      this.param.append(\"productDescription\", this.form.desc);\r\n      // console.log(this.param);\r\n      this.$https\r\n        .post(\"/api/my_mai/itemlist/edit/save\", {\r\n          userId: this.userId,\r\n          productId: this.productId,\r\n          proInfo: this.form\r\n        })\r\n        .then(res => {\r\n          this.$message({\r\n            showClose: true,\r\n            message: \" Modified successfully！\",\r\n            type: \"success\"\r\n          });\r\n          setTimeout(() => {\r\n            this.$router.push(\"/productlist\"); //edit成功后自动跳转到myproduct页面\r\n          }, 2000);\r\n        });\r\n    },\r\n    close() {\r\n      this.$confirm(\r\n        \"Unsaved content detected. Do you want to continue editing?\",\r\n        \"Confirmation \",\r\n        {\r\n          distinguishCancelAndClose: true,\r\n          confirmButtonText: \"Continue\",\r\n          cancelButtonText: \"Discard changes\"\r\n        }\r\n      )\r\n        .then(() => {\r\n          this.$message({\r\n            type: \"info\",\r\n            message: \"Stay on the current page\"\r\n          });\r\n        })\r\n        .catch(action => {\r\n          this.$message({\r\n            type: \"info\",\r\n            message:\r\n              action === \"cancel\"\r\n                ? \"Discard changes and leave\"\r\n                : \"Stay on the current page\"\r\n          });\r\n        });\r\n    },\r\n    handleRemove(file, fileList) {\r\n      console.log(file, fileList);\r\n    },\r\n    handlePictureCardPreview(file) {\r\n      this.dialogImageUrl = file.url;\r\n      this.dialogVisible = true;\r\n    },\r\n    beforeUpload(file) {\r\n      this.param = new FormData();\r\n      this.fileList.push(file);\r\n      let images = [...this.fileList];\r\n      console.log(\"images\", images);\r\n\r\n      images.forEach((img, index) => {\r\n        this.param.append(`productImage_${index}`, img); // 把单个图片重命名，存储起来（给后台）\r\n      });\r\n      // 图片上传需要为true\r\n      return true;\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\">\r\n.editPro {\r\n  background-color: #07d89e;\r\n}\r\n\r\n.text {\r\n  font-size: 14px;\r\n}\r\n\r\n.item {\r\n  margin-bottom: 18px;\r\n  text-align: center;\r\n}\r\n\r\n.clearfix:before,\r\n.clearfix:after {\r\n  display: table;\r\n  content: \"\";\r\n}\r\n\r\n.clearfix:after {\r\n  clear: both;\r\n}\r\n\r\n.box-card {\r\n  width: 550px;\r\n  height: 650px;\r\n  background: rgba(255, 255, 255, 0.4);\r\n  border: none;\r\n}\r\n\r\n.cbt:hover {\r\n  background-color: #96fbc4;\r\n  color: #96fbc4;\r\n}\r\n\r\n.el-icon-error {\r\n  margin-left: 450px;\r\n  font-size: 35px;\r\n}\r\n\r\n.el-icon-error:hover {\r\n  color: #6e6e6e;\r\n}\r\n\r\n.el-icon-delete {\r\n  margin-right: 450px;\r\n  font-size: 20px;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}