{"ast":null,"code":"import \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.array.splice.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"scart\",\n  data: function data() {\n    return {\n      imgUrl: require(\"../../assets/logo.jpg\"),\n      tableData: [],\n      productArr: [{\n        cartItemId: 1,\n        count: 5,\n        itemImage: null,\n        name: \"computer\",\n        price: 8000,\n        prodId: 2,\n        totalPrice: 40000\n      }],\n      multipleSelection: []\n    };\n  },\n  created: function created() {\n    this.cartList();\n  },\n  methods: {\n    cartList: function cartList() {\n      var userId = localStorage.getItem(\"userId\");\n      var that = this;\n      this.$https.get('http://localhost:8088/show', {\n        params: {\n          userId: Number(userId)\n        }\n      }).then(function (res) {\n        var result = res.data;\n        console.log(result);\n        that.tableData = result;\n      });\n    },\n    // 删除选中单个商品\n    handleDelete: function handleDelete(index, row) {\n      var _this = this;\n\n      this.$confirm('确定删除该商品，不再看看吗？', '提示', {\n        confirmButtonText: 'Yes',\n        cancelButtonText: 'No',\n        type: 'warning'\n      }).then(function () {\n        _this.$https.post('http://192.168.10.105/cart/delete', {\n          userId: _this.userId,\n          productId: _this.productId\n        }).then(function (res) {\n          _this.tableData.splice(index, 1);\n\n          _this.$message({\n            showClose: 'false',\n            duration: 3000,\n            type: 'success',\n            message: 'Delete succeeded!'\n          });\n\n          _this.tableData = _this.tableData;\n        }); //删除数组中指定的元素\n        // this.tableData.splice(index, 1);\n        // this.$message({\n        //   type: 'success',\n        //   message: '删除成功啦!'\n        // });\n        // this.tableData=this.tableData\n\n      }).catch(function () {\n        _this.$message({\n          type: 'info',\n          message: 'Delete cancel！'\n        });\n      });\n    },\n    //选择和全选功能\n    handleSelectionChange: function handleSelectionChange(selection) {\n      this.multipleSelection = selection;\n    },\n    //提交购物车功能\n    handleSubmit: function handleSubmit() {\n      var _this2 = this;\n\n      this.$https.post('/api/cart_index/submit', {\n        userId: this.userId,\n        productId: this.productId\n      }).then(function (res) {\n        if (res.data.code === 200) {\n          _this2.$message({\n            showClose: 'true',\n            type: 'success',\n            message: 'The goods have been submitted successfully. Please contact the seller~'\n          });\n        } else {\n          _this2.$message({\n            showClose: 'true',\n            type: 'error',\n            message: 'The good has been sold, submission failed'\n          });\n        }\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA;AACAA,eADA;AAEAC,MAFA,kBAEA;AACA;AACAC,8CADA;AAEAC,mBAFA;AAGAC,mBACA;AACAC,qBADA;AAEAC,gBAFA;AAGAC,uBAHA;AAIAP,wBAJA;AAKAQ,mBALA;AAMAC,iBANA;AAOAC;AAPA,OADA,CAHA;AAcAC;AAdA;AAgBA,GAnBA;AAoBAC,SApBA,qBAoBA;AACA;AACA,GAtBA;AAwBAC;AACAC,YADA,sBACA;AACA;AACA;AACA;AACAC;AACAC;AADA;AADA,SAIAC,IAJA,CAIA;AACA;AACAC;AACAC;AACA,OARA;AASA,KAbA;AAcA;AACAC,gBAfA,wBAeAC,KAfA,EAeAC,GAfA,EAeA;AAAA;;AACA;AACAC,gCADA;AAEAC,8BAFA;AAGAC;AAHA,SAIAR,IAJA,CAIA;AACA;AAAAD;AAAAU;AAAA;AACA;;AACA;AACAC,8BADA;AAEAC,0BAFA;AAGAH,2BAHA;AAIAI;AAJA;;AAMA;AACA,SATA,EADA,CAWA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAtBA,EAsBAC,KAtBA,CAsBA;AACA;AACAL,sBADA;AAEAI;AAFA;AAIA,OA3BA;AA4BA,KA5CA;AA6CA;AACAE,yBA9CA,iCA8CAC,SA9CA,EA8CA;AACA;AACA,KAhDA;AAiDA;AACAC,gBAlDA,0BAkDA;AAAA;;AACA;AAAAjB;AAAAU;AAAA;AACA;AACA;AACAC,6BADA;AAEAF,2BAFA;AAGAI;AAHA;AAKA,SANA,MAMA;AACA;AACAF,6BADA;AAEAF,yBAFA;AAGAI;AAHA;AAKA;AACA,OAdA;AAeA;AAlEA;AAxBA","names":["name","data","imgUrl","tableData","productArr","cartItemId","count","itemImage","price","prodId","totalPrice","multipleSelection","created","methods","cartList","params","userId","then","console","that","handleDelete","index","row","confirmButtonText","cancelButtonText","type","productId","showClose","duration","message","catch","handleSelectionChange","selection","handleSubmit"],"sourceRoot":"src/views/main","sources":["CartView.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <el-container style=\"height:100vh\">\r\n     \r\n\r\n        <!--        购物车部分实现-->\r\n        <el-main>\r\n          <el-header>\r\n            My Shopping Cart<i class=\"el-icon-shopping-cart-full\"></i>\r\n          </el-header>\r\n          <!-- table -->\r\n          <div class=\"table\">\r\n            <el-table element-loading-text=\"正在为您拼命加载中...\" :data=\"tableData\" ref=\"multipleTable\" style=\"width: 100%\"\r\n                      @selection-change=\"handleSelectionChange\" :close-on-click-modal=\"false\" :close-on-press-escape=\"false\"\r\n                      :header-cell-style=\"{background:'#f8f8f8',color:'#999'}\">\r\n              <el-table-column type=\"selection\" width=\"75\" align=\"center\" />\r\n              <el-table-column prop=\"shopImg\" align=\"center\" width=\"150\" label=\"Products\">\r\n                <template slot-scope=\"scope\">\r\n                  <img :src=\"scope.row.shopImg\" class=\"shopImg\" alt=\"\">\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column prop=\"shop\" align=\"center\">\r\n                <template slot-scope=\"scope\">\r\n                  <span class=\"shop\">{{scope.row.name}}</span>\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column prop=\"price\" label=\"Price\" align=\"center\">\r\n                <template slot-scope=\"scope\">\r\n                  <span class=\"price\">¥{{scope.row.price}}</span>\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column label=\"Operation\" align=\"center\">\r\n                <template slot-scope=\"scope\">\r\n                  <i class=\"el-icon-delete\" style=\"font-size:18px;cursor: pointer;\" @click=\"handleDelete(scope.$index, scope.row)\"></i>\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n          </div>\r\n\r\n          <el-footer>\r\n            <el-button class=\"el-icon-s-goods\" style=\"background-color:#FEF189;float: right\" @click=\"handleSubmit()\">Submit</el-button>\r\n          </el-footer>\r\n        </el-main>\r\n      </el-container>\r\n    \r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n  name: \"scart\",\r\n  data() {\r\n    return {\r\n      imgUrl: require(\"../../assets/logo.jpg\"),\r\n      tableData:[],\r\n      productArr:[\r\n        {\r\n          cartItemId: 1,\r\n          count: 5,\r\n          itemImage: null,\r\n          name: \"computer\",\r\n          price: 8000,\r\n          prodId: 2,\r\n          totalPrice: 40000,\r\n        }\r\n      ],\r\n      multipleSelection: [],\r\n    }\r\n  },\r\n  created() {\r\n    this.cartList()\r\n  },\r\n\r\n  methods:{\r\n    cartList(){\r\n         let userId = localStorage.getItem(\"userId\")\r\n        let that=this;\r\n         this.$https.get('http://localhost:8088/show',{\r\n              params:{\r\n                userId: Number(userId)\r\n              }\r\n          }).then(res=>{\r\n            var result=res.data;\r\n            console.log(result)\r\n            that.tableData=result;\r\n          })\r\n     },\r\n    // 删除选中单个商品\r\n    handleDelete(index, row) {\r\n      this.$confirm('确定删除该商品，不再看看吗？', '提示', {\r\n        confirmButtonText: 'Yes',\r\n        cancelButtonText: 'No',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        this.$https.post('http://192.168.10.105/cart/delete',{userId:this.userId,productId:this.productId}).then(res=>{\r\n          this.tableData.splice(index, 1);\r\n          this.$message({\r\n            showClose:'false',\r\n            duration:3000,\r\n            type: 'success',\r\n            message: 'Delete succeeded!'\r\n          });\r\n          this.tableData=this.tableData\r\n        })\r\n        //删除数组中指定的元素\r\n        // this.tableData.splice(index, 1);\r\n        // this.$message({\r\n        //   type: 'success',\r\n        //   message: '删除成功啦!'\r\n        // });\r\n        // this.tableData=this.tableData\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: 'Delete cancel！'\r\n        });\r\n      });\r\n    },\r\n//选择和全选功能\r\n    handleSelectionChange(selection) {\r\n      this.multipleSelection = selection;\r\n    },\r\n    //提交购物车功能\r\n    handleSubmit(){\r\n      this.$https.post('/api/cart_index/submit',{userId:this.userId,productId:this.productId}).then(res=>{\r\n        if(res.data.code===200){\r\n          this.$message({\r\n            showClose:'true',\r\n            type: 'success',\r\n            message: 'The goods have been submitted successfully. Please contact the seller~'\r\n          })\r\n        }else{\r\n          this.$message({\r\n            showClose: 'true',\r\n            type: 'error',\r\n            message: 'The good has been sold, submission failed'\r\n          })\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n\r\n\r\n  }\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.el-main{\r\n  width:100%;\r\n}\r\n.el-header{\r\n  background-color: #07D89E;\r\n  color: #FEF189;\r\n  text-align: center;\r\n  font-size: 23px;\r\n  line-height: 60px;\r\n}\r\n.el-footer{\r\n  background-color:  #07D89E;\r\n  line-height: 60px;\r\n}\r\n.table {\r\n  margin-top: 50px;\r\n  position: relative;\r\n  padding-bottom: 100px;\r\n\r\n  .price,\r\n  .shop {\r\n    color: #000733;\r\n  }\r\n  .shopImg{\r\n    border: 1px solid #DDDDDD;\r\n    float: left;\r\n    height: 100px;\r\n    width: 100px;\r\n    margin: 0px 20px 0px 0px;\r\n  \r\n  }\r\n}\r\n\r\n</style>\r\n\r\n"]},"metadata":{},"sourceType":"module"}